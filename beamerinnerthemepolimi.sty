\mode<presentation>

% Background.
\setbeamertemplate{background}{
    % Titlepage.
    \ifnum\c@framenumber=1
        \begin{tikzpicture}[overlay, remember picture]
            \if@bgphoto
                \node at (current page.north) [anchor=north, inner sep=0pt] {\includegraphics[width=\paperwidth]{bgphoto_cut.png}};
            \fi
            \node (foot) at (current page.south) [anchor=south, inner sep=0pt] {\includegraphics[width=\paperwidth]{bg.png}};
            \node at (foot.north) [anchor=south, inner sep=0.5cm] {
                \if@bgphoto
                    \includegraphics[width=0.3\paperwidth]{logo_centrato_COL_negativo.png}
                \else
                    \includegraphics[width=0.3\paperwidth]{logo_centrato_COL_positivo.png}
                \fi};
            \node at ([shift={(0, -0.1)}] foot.north) {\includegraphics[width=0.99\paperwidth]{decoration.png}};
        \end{tikzpicture}  
    \else
        \begin{tikzpicture}[overlay, remember picture]
            \node (head) at ([shift={(0, 2.475)}] current page.north) [anchor=north, inner sep=0pt] {\includegraphics[width=\paperwidth]{bg.png}};
            \node at ([shift={(0, 0.1)}] head.south) {\includegraphics[width=0.99\paperwidth]{decoration.png}};
            \node at ([shift={(0, -3.225)}] current page.south) [anchor=south, inner sep=0pt] {\includegraphics[width=\paperwidth]{bg.png}};
        \end{tikzpicture}
    \fi
}

% Title page.
\defbeamertemplate*{title page}{polimi}[1][]
{
    \color{white}
    \vspace{6cm}
    {\Huge\bf \inserttitle} \\[0.25cm]
    {\Large \insertsubtitle} \\[0.5cm]
    
    \vfill
    
    \insertauthor \\
    \insertdate
    
    \vfill
    
    \addtocounter{page}{-1}
}


% Table of Contents.
\setbeamertemplate{section in toc}[circle]
\setbeamertemplate{subsection in toc}{\leavevmode \leftskip=0.7em {\color{bluePolimi} $\bullet$} \hskip1pt \inserttocsubsection\par}  

\mode<all>
